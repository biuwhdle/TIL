## 1일 1로그 100일 완성 IT지식

1부 하드웨어 - 013 모형 컴퓨터로 더하기 프로그램 만들기

#### 모형 컴퓨터 (Toy computer)

- 이론상으로만 존재 -> 어떤 방식으로든 설계 가능
- 이론상의 설계를 모방하여 작동하는 프로그램 만들 수 있음
- 메모리: 명령어와 데이터를 저장하기 위함
- 누산기(accumulator): 한 개의 수를 담을 만한 용량의 부가적인 저장 영역
  - 계산기에서 사용자가 가장 최근에 입력한 수나 가장 최근의 계산 결과를 담고 있는 디스플레이와 유사
- 대표적인 명령어
  - GET: 키보드에서 수를 입력받은 후 누산기에 넣음 (누산기의 기존 내용 덮어씀)
  - PRINT: 누산기의 내용 출력 (누산기의 내용 변하지 않음)
  - STORE M: 누산기 내용의 복사본을 메모리 위치 M에 저장 (누산기의 내용 변하지 않음)
  - LOAD M: 메모리 위치 M의 내용을 누산기에 적재 (M의 내용은 변하지 않음)
  - ADD M: 메모리 위치 M의 내용을 누산기의 내용에 더함 (M의 내용은 변하지 않음)
  - STOP: 실행 중지
- 프로세서의 사이클
  - 인출(Fetch): 메모리에서 다음 명령어 가져옴
  - 해석(Decode): 명령어가 무슨 일을 하는지 알아냄
  - 실행(Execute): 명령어 실행. 인출 단계로 되돌아감

#### 모형 프로그램 예시

- 첫 번째: <https://www.cs.princeton.edu/courses/archive/fall21/cos109/toysim.html>
  - 명령어 GET, PRINT, STOP 실행 -> 수 입력 요청, 수 출력, 작동 멈춤
- 두 번째: 메모리에 값을 저장한 후 그 값을 가져옴

```
  GET             //첫 번째 수를 입력받아 누산기에 넣음
  STORE FirstNum  //FirstNum이라는 메모리 위치에 첫 번째 수를 저장
  GET             //두 번째 수를 입력받아 누산기에 넣음
  ADD FirstNum    //첫 번째 수를 누산기에 있는 값에 더함
  PRINT           //결과 합계 값을 출력
  STOP            //프로그램 실행을 중지
FirstNum:         //첫 번째 입력 수를 담을 메모리 위치
```

- 주석(comment): 각 명령어 앞에 따라옴. 프로그래머에게 도움을 주는 해설 자료. 프로그램 자체에는 영향 없음
- 메모리 공간 확보: 명령어가 아닌 데이터 값을 저장해야 함
  - 데이터 값을 모든 명령어 다음에 오도록 프로그램 끝에 둠 -> 도달하기 전에 STOP함 -> 데이터 값으로 해석
- 메모리 위치를 나타낼 방법
  - 데이터가 마지막 메모리 위치에 오도록 함 (ex. STORE 7): 프로그램이 수정되면 데이터 위치가 바뀔 수도 있음
  - 데이터 위치에 이름 부여 (ex. FirstNum:): 데이터 위치 이름 뒤에는 콜론을 붙여 레이블임을 나타냄

#### 분기 명령어

- GOTO: 다음 명령어가 아니라 GOTO가 지정하는 위치로 이동하여 명령어 실행
- ex. 끝없이 실행되는 데이터 출력 프로그램

```
Top: GET        //수를 입력받아 누산기에 넣음
     PRINT      //수를 출력
     GOTO Top   //Top으로 돌아가서 다른 수를 입력받음

// 루프(loop)가 무한히 반복되는 문제
```

- 조건부 분기(conditional branch)/조건부 점프(conditional jump): 조건을 검사하여 다음에 수행할 작업을 결정
  - IFZERO: 누산기의 값이 0이면 특정 명령어로 분기. 그렇지 않으면 다음 명령어부터 실행을 계속
- ex. 0이 입력되면 실행을 멈추는 데이터 출력 프로그램

```
Top: GET          //수를 입력받아 누산기에 넣음
     IFZERO Bot   //누산기 값이 0이면 Bot 레이블이 붙은 명령어로 이동
     PRINT        //누산기 값이 0이 아니므로 그 값을 출력
     GOTO Top     //Top으로 돌아가서 다른 수를 입력받음
Bot: STOP

// 숫자를 입력하다가 0을 입력하면 실행 종료
```

- ex. 일련의 수를 합산하는 모형 컴퓨터 프로그램

```
Top: GET  // 수를 입력받음
     IFZERO Bot  // 입력된 수가 0이면 Bot으로 감
     ADD Sum     // 가장 최근의 값에 누적 합계를 더함
     STORE Sum   // 결과를 새로운 누적 합계로 저장
     GOTO Top    // Top으로 돌아가서 다른 수를 입력받음
Bot: LOAD Sum    // 누적 합계를 누산기에 적재
     PRINT       // 출력
     STOP
Sum: 0           // 누적 합계를 담을 메모리 위치 (프로그램이 시작할 때 0으로 초기화됨)

// Sum: 0 같은 명령어는 유사 명령어
// 메모리 위치에 이름을 할당하고 프로그램이 실행을 시작하기 전에 그 위치에 특정한 숫자 값을 넣어라
```

#### 메모리 내부 표현

- 가정
  - 각 명령어가 각자의 숫자형 코드를 저장하는 데 메모리 위치를 1개 사용, 명령어가 메모리를 참조하거나 데이터 값을 사용하면 바로 다음 위치도 사용함
  - GET은 메모리 위치 1개, IFZERO나 ADD 등은 메모리 2칸
  - 어떤 데이터 값이든 한 개의 메모리 위치에 들어감
  - 명령어의 숫자 값은 다음과 같음 (GET=1, PRINT=2, STORE=3, LOAD=4, ADD=5, STOP=6, GOTO=7, IFZERO=8)
- 수 합산하기 프로그램의 메모리 표현

|위치|메모리|레이블|명령어|  
|:-----:|:---:|:---:|:---|
|1|1|Top:|GET|
|2|8| |IFZERO Bot|
|3|10| | |
|4|5| |ADd Sum|
|5|14| | |
|6|3| |STORE Sum|
|7|14| | |
|8|7| |GOTO Top|
|9|1| | |
|10|4|Bot:|LOAD Sum|
|11|14| | |
|12|2| |PRINT|
|13|6| |STOP|
|14|0|Sum:|0 [데이터, 0으로 초기화됨]|
