## 1일 1로그 100일 완성 IT지식

2부 소프트웨어 - 036 파일 시스템과 블록

#### 파일 시스템

- 파일 시스템: 운영체제에서 물리적 저장 매체를 파일과 폴더의 계층 구조처럼 보이게 하는 부분
  - 논리적 구성과 물리적 구현 간의 분리
- 폴더(directory): 다른 폴더와 파일의 이름을 담고 있음
  - 조직화된 구조를 제공함
  - 파일: 실질적인 내용을 남고 있음
- 파인더, 파일 탐색기: 파일이 어디 있는지 이미 알 때 가장 유용
- 파일 시스템의 역할
  - 모든 정보를 관리, 애플리케이션이나 운영체제의 나머지 부분이 정보를 읽고 쓸 수 있도록 접근 가능하게 만듦
  - 파일에 대한 접근이 효율적으로 수행되고 서로 간섭하지 않도록 조정
  - 데이터의 물리적인 위치를 계속 파악
- 파일 시스템 서비스는 가장 낮은 레벨의 시스템 콜을 통해 사용 가능
- 파일 시스템 서비스의 공통적인 부분은 라이브러리에 제공 -> 프로그래밍 수월

#### 보조 기억 장치 파일 시스템

- 파일 시스템은 한 파일이 사용하는 바이트를 다른 파일이 사용하는 바이트와 같은 블록에 저장하지 않음
  - ex. 2500byte는 1000byte 블록 3개에 저장
  - 마지막 블록이 꽉 차지 않으면 약간의 공간 낭비
- 폴더 엔트리(folder entry)
  - 파일 이름, 크기, 생성되거나 변경된 날짜와 시간, 각종 정보(권한, 파일 유형 등)를 담고 있음
  - 정보는 파일 탐색기나 파인더 등에서 확인 가능
  - 그 파일이 드라이브 어디에 저장되어 있는지에 관한 정보 포함
  - 파일의 위치 정보를 관리하는 방법
    1. 폴더 엔트리가 블록 번호 목록을 담고 있음
    2. 블록 번호 목록을 담고 있는 블록을 참조
    3. 첫 번째 블록 번호를 담고 있음 -> 다음 블록 번호를 계속해 구함
- 웨어 레벨링(wear leveling)
  - SSD 장치의 특징
    - SSD 장치는 하드 드라이브와 다른 드라이버 사용
    - 장치 자체에 정보가 어느 위치에 있는지 기억하기 위한 정교한 코드 포함
    - SSD 장치의 각 영역이 사용될 수 있는 횟수에 제한
  - SSD 내부 소프트웨어는 각 물리적 블록이 몇 번 사용되었는지 파악, 각 블록이 거의 같은 횟수로 사용되도록 데이터를 옮김
- 폴더와 파일 시스템
  - 폴더: 다른 폴더와 파일이 어디에 있는지 정보를 담고 있는 파일
  - 파일 시스템: 폴더의 내용을 관리하고 유지하기 위한 권리를 독점적으로 보유
  - 사용자, 애플리케이션: 파일 시스템에 요청을 해야 간접적으로 폴더 내용을 변경 가능
- 파일 시스템은 계층 구조의 최상위부터 파일 검색
  - ex. C:/My Documents/book/book.txt
  - 폴더 이하에 있는 파일과 폴더에 수행되는 검색의 범위가 좁아짐 -> 효율적
  - 전체 경로명은 유일무이해야 함 (여러 파일이 경로의 일부를 공유할 수는 있음)
  - 반드시 최상위에서 시작할 필요는 없음
    - 프로그램, 운영체제가 현재 사용되는 폴더를 계속 파악하기 때문
    - 시스템이 작업 속도를 높이기 위해 자주 사용되는 폴더를 캐싱하기도 함
- 새 파일 생성
  - 프로그램이 새 파일을 생성하려 할 때, 파일 시스템에 요청
  - 파일 시스템은 적절한 폴더에 새로운 엔트리를 넣고, 이름, 날짜 등 넣음. 크기는 0으로 표시
  - 프로그램이 파일에 데이터를 씀
  - 파일 시스템은 요청된 정보를 담기에 충분한 수의 미사용 블록(free block)을 찾아 데이터를 복사해 넣음
  - 파일 시스템이 폴더의 블록 목록에 그 블록들을 삽입, 애플리케이션으로 되돌아감
- 파일 시스템은 모든 블록의 목록을 유지하고 있음
  - 드라이브에서 현재 사용되지 않는 파일을 포함하고 있는 것
  - 새로운 블록에 대한 요청이 도착하면 미사용 블록의 목록에서 가져온 블록으로 요청 만족시킴
  - 미사용 블록 목록: 운영체제만 접근 가능. 애플리케이션은 접근 불가
