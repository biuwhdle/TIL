## 1일 1로그 100일 완성 IT지식

4부 데이터 - 083 검색 엔진과 타깃 광고

#### 검색 엔진

- 대규모 하이퍼텍스트 웹 검색 엔진 분석(The anatomy of a large-scale hypertextual web search engine)
  - 구글 검색 엔진에 관한 최초 논문
  - 초기 검색 엔진 중 하나인 알타비스타(AltaVista)는 하루 2천만 건의 쿼리 처리
  - 2000년이 되면 웹에 십억 개 이상의 페이지가 존재할 것, 하루에 수억 개 쿼리를 처리할 것을 예측
- 검색 엔진의 작동
  - 사용자 관점: 웹페이지 폼에 쿼리를 입력 -> 서버에 보냄 -> 링크와 텍스트 조각의 목록이 반환
  - 서버 관점: 쿼리 단어들을 포함하는 페이지 목록 생성 -> 관련도 순으로 정렬 -> 페이지 텍스트 조각을 HTML로 감쌈 -> 사용자에게 보냄
- 웹 크롤링(web crawling)
  - 페이지 정보를 미리 서버에 저장하고 구조화해 쿼리에 답할 준비를 함
  - 페이지를 훑어보며 관련 있는 내용을 데이터베이스에 저장 -> 이후 들어오는 쿼리에 신속하게 응답할 수 있음
  - 인터넷 페이지의 실시간 검색이 아니라 캐싱된 페이지 정보의 미리 계산된 인덱스에 기반
- 웹의 규모
  - 수십억 명의 사용자와 수백억 개의 웹페이지
  - 일반적인 웹페이지의 용량이 100KB라 가정할 때, 1천억 개의 페이지를 저장하려면 10페타바이트의 디스크 공간 필요
  - 웹의 상당 부분은 급속히 변함 -> 크롤링은 지속적이고 매우 효율적으로 수행되어야 함
- 검색 엔진이 하는 일
  - 하루에 수십억 개의 쿼리를 처리
    - 각 쿼리를 처리하기 위해 데이터베이스를 훑어보고, 관련된 페이지를 찾고, 적합한 순서로 정렬
  - 검색 결과에 붙는 광고를 선택, 배후에서 모든 것을 기록
    - 검색 품질을 개선하고 경쟁 업체보다 앞서 나가며 더 많은 광고를 판매하기 위한 데이터를 얻기 위함
  - 막대한 양의 트래픽 -> 단순한 검색이나 정렬 알고리즘으로는 충분히 빨리 작동할 수 없음

#### 검색 엔진의 알고리즘

- 과정
  - 크롤링 처리
    - 다음에 어떤 페이지를 볼지 결정, 인덱싱 가능한 정보를 추출해 인덱스 구축기로 전달
    - 인덱스 구축기: 페이지 URL을 추출, 중복되거나 관련없는 항목을 제거, 남은 항목을 차례대로 검사할 목록에 추가
    - 크롤러는 한 사이트를 자주 방문할 수 없음 (트래픽 부담이 증가하기 때문)
    - 페이지별로 변경되는 속도가 다름 -> 페이지 변경 빈도를 정확히 평가, 상대적으로 느리게 바뀌는 페이지보다 빨리 바뀌는 페이지를 더 자주 방문
  - 인덱스 구축
    - 크롤러에서 페이지를 가져온 뒤 각 페이지에서 관련 있는 부분을 추출, 각 부분을 URL과 페이지상 위치와 함께 인덱싱
    - 인덱싱: 어떤 웹페이지에서 발견되는 단어나 인덱싱 가능한 항목을 표시하는 페이지와 위치 목록 만듦
      - 목록은 특정 항목을 포함하는 페이지 목록을 빠르게 가져올 수 있는 형태로 저장
  - 쿼리 응답 만들기
    - 쿼리의 모든 단어를 가져와 인덱싱 목록을 사용해 일치하는 URL들을 빠르게 찾음, 가장 정확하게 일치하는 URL들을 선택
    - 작업 규모가 가장 큰 문제 (수많은 가능한 응답 중 가장 잘 일치하는 10개 정도를 빠르게 골라내야 함)
- 초기 검색 엔진: 검색어가 포함된 페이지 목록만 표시 -> 웹이 커질수록 관련성이 적은 페이지가 늘어남
- 페이지랭크(PageRank) 알고리즘: 각 페이지에 품질 측정값 할당
  - 다른 페이지가 링크를 걸거나, 높은 순위가 매겨진 페이지에서 링크를 건 페이지에 더 높은 가중치를 부여
  - 많이 인용된 페이지는 쿼리와 관련 있을 확률이 높기 때문

#### 광고 수익

- 검색 엔진의 비용을 충당하기 위해 광고 수익 마련
- 광고주: 웹페이지에 광고를 표시하기 위해 비용 지불
  - 가격: 페이지 뷰, 클릭, 전환의 측면에서 결정
- 과정
  - 검색 엔진 회사는 검색어 실시간 경매를 실시
  - 광고주는 특정 검색어에 대한 검색 결과 옆에 광고를 표시할 권리를 얻고자 입찰에 참여
  - 광고 회사는 사용자가 광고를 클릭하면 수익을 올림
- 불공정성과 편향성
  - 광고주에게 유리하고 소비자의 요구에 덜 유리한 쪽으로 편향될 것이라는 예상
    - ex. 구글 자사 제품에 유리, 경쟁 업체에 불리한 방향으로 편향되어 있을 것이라는 법적 이의 제기
  - 인종, 종교 또는 민족에 관한 프로파일링을 기반으로 미묘하게 특정 그룹에 유리하게 치우쳐 있는 광고
    - ex. 어떤 이름은 인종적 배경이나 민족적 배경을 예측할 수 있음 -> 결과가 해당 집단에 우호적이거나 비우호적이 되도록 할 수 있음
