## 1일 1로그 100일 완성 IT지식

4부 통신 - 084 내가 인터넷을 보면 인터넷도 나를 본다

#### 정보 추적

- GPS가 지원되는 휴대전화는 일반적으로 약 10m 이내 범위까지 위치를 알고 있음
  - 지오태깅(geo-tagging): 찍은 사진 각각에 지리적 위치를 인코딩함
- 브라우저에서 만들어지는 모든 요청과 함께 특정 정보가 자동으로 전송됨
  - IP 주소, 보고 있는 페이지(리퍼러, referer), 브라우저 유형과 버전(사용자 에이전트, user agent), 운영체제, 언어 설정 등
  - 서버 도메인에서 온 쿠키가 있다면 쿠키도 전송됨
- 추적의 원리는 링크의 작동 방식에 있음
  - 웹페이지에 이미지의 참조 링크가 포함 -> 해당 이미지는 명시된 도메인이 어디든 간에 그 도메인에서 로드됨
  - 보통 요청을 하는 페이지의 식별 정보가 이미지 URL에 인코딩되어 있음
  - 브라우저가 이미지를 가져올 때 이미지를 제공하는 도메인은 사용자가 어느 페이지에 접근했는지 알 수 있음
  - 사용자의 컴퓨터나 휴대전화에 쿠키를 저장, 이전 방문에서 생긴 쿠키를 가져옴
- 웹 버그(web bug), 웹 비콘
  - 너비와 높이가 1픽셀이며 투명인 이미지
  - 유일한 목적은 추적: 쿠키를 저장, 수집
  - ex. 구글, 페이스북 등 회사는 사람들이 방문한 사이트 정보를 수집, 고객에게 광고 공간을 팔기 위해 정보 사용
    - 고객은 정보를 표적 광고에 활용, 타겟층에 관한 다른 정보와 이 정보의 상관관계를 찾아내려 할 수도 있음

#### 추적 방어 메커니즘

- 브라우저에서는 쿠키를 거부하거나 제3자 쿠키를 차단하는 기능을 제공
- 옵트아웃(opt-uot) 메커니즘
  - 당사자가 자신의 데이터 수집을 허용하지 않는다고 명시할 때 정보 수집이 금지됨
  - 주요 추적 회사가 사용자의 컴퓨터에서 특정 쿠키를 발견하면 온라인 활동을 표적 광고를 위해 추적하지 않음
- 추적 안 함(Do Not Track, DNT) 메커니즘
  - DNT 옵션을 설정 -> 추가적인 HTTP 헤더가 요청과 함께 전송됨
  - 사용자에 관한 정보를 다른 사이트에 전달하지 않음
- 비공개 브라우징(private browsing), 익명 모드(incognito mode)
  - 브라우저 세션이 종료되면 브라우저가 방문 기록, 쿠키, 기타 브라우징 데이터를 지우도록 지시하는 클라이언트 측 메커니즘
  - 같은 컴퓨터를 쓰는 다른 사용자는 무엇을 했는지 알 수 없음
  - 방문한 사이트에 기록된 정보는 지워지지 않음
  - 일부 사이트는 익명 모드를 사용 중일 때 콘텐츠 제공을 거부함

#### 추적 도구로서의 자바스크립트

- 브라우저는 원본 HTML 파일에 있거나 아래의 코드가 포함된 URL에서 로드된 모든 자바스크립트 코드를 실행

```
<script>
  src="스크립트이름.js">
</script>
```

- 특정 페이지 조회 방식을 관찰하는 분석에 자주 사용됨
- 자바스크립트 코드가 하는 일
  - 자신이 왔던 사이트에서 온 쿠키를 설정하고 가져옴. 브라우저의 방문 페이지 기록 같은 다른 정보에 접근
  - 마우스 위치를 지속적으로 모니터링해 서버에 보고 -> 서버는 웹페이지의 어느 부분이 사용자의 관심을 끄는지 아닌지 추측
  - 클릭하거나 텍스트 블록으로 강조 표시한 위치를 모니터링
- ex. 마우스 움직임에 따라 좌표를 표시하는 자바스크립트 코드

```
<html>
<script>
function move(event) {
  document.getElementById("body").innerHTML =
    "position: " + event.clientX + " " + event.clientY;
}
</script>
<body>
  <div id="body" style="width:100%; height: 500px;" onmousemove="move(event)">
  </div>
</body>
</html>
```

#### 사용자 식별 및 추적

- 브라우저 핑거프린팅(browser fingerprinting)
  - 브라우저의 개별 특성을 사용해 쿠키 없이도 사용자를 식별하는 기법 -> 개인을 고유하게 식별하기도 함
- 캔버스 핑거프린팅(canvas fingerprinting)
  - 개별 브라우저가 특정 문자 시퀀스를 어떻게 렌더링하는지 확인 가능
- 파놉티클릭(Panopticlick): 최근 방문자 중 사용자가 얼마나 고유하게 식별되는지 확인하는 사이트
- 블랙라이트(themarkup.org/blacklight): 무방비 상태의 브라우저를 시뮬레이션 -> 추적을 확인할 수 있음
- 심층 패킷 검사(deep packet inspection)
  - 게이트웨이가 IP 패킷을 검사해 패킷에 포함된 내용을 확인, 때로는 수정함
  - 웹 브라우징에 국한되지 않고 사용자와 인터넷 간 모든 트래픽에 적용됨
  - 표적 광고를 더 잘 겨냥하거나 어떤 국가에 들어가고 나오는 트래픽을 감시하거나 통신에 개입하려는 목적으로 사용되기도 함 (ex. 중국의 방화장성, NSA의 미국 내 트래픽 도청)
  - 심층 패킷 검사에 대한 방어책: 종단 간 암호화
 
#### 개인 식별 정보에 대한 규칙

- EU: 회사는 개인의 명시적인 허가 없이는 개인에 대한 데이터를 합법적으로 수집하거나 사용할 수 없음
  - GDPR: 개인이 명시적으로 동의하지 않는 한 각각의 개인 데이터를 처리할 수 없음
    - 명시적으로 거부하지 않으면 동의한다고 간주하는 온라인 양식을 사용하더라도 충분히 동의한 것으로 간주되지 않음
    - 사람들은 자신의 개인정보에 접근할 권리와 그 정보가 어떻게 사용되는지 확인할 권리 존재
    - 동의는 언제는 철회될 수 있음
- 미국: 어떤 회사나 단체도 사용자에게 사전에 통보하거나 거부할 기회를 주지 않고 정보를 수집 및 배포할 수 있음
  - CCPA(California Consumer Privacy Act, 캘리포니아주 소비자 프라이버시 보호법)
  - '내 데이터를 판매하지 마시오'라는 옵션이 명시적으로 포함되어 있음
  - 캘리포니아주에만 해당됨
