## 레트로의 유니티 게임 프로그래밍 에센스

9장: 방향, 크기, 회전 / 10장: 공간과 움직임

#### 벡터의 정의

- 3가지 관점
  - 공간상의 화살표 (물리학자, 공학자, 게임 개발자)
  - 나열된 숫자 데이터를 묶는 단위 (데이터를 다루는 프로그래머)
  - 벡터 연산을 만족하고 정해진 개수의 원소를 갖는 것 (수학자)
- 어떤 벡터 집합에 속한 벡터는 해당 벡터 집합에서 요구하는 개수의 원소를 반드시 가져야 함
  - Vector3은 3D 벡터. x,y,z에 해당하는 세 원소 가져야 함
  - ex. (0,0,0) / (1,4,1) / (-100,-100,-100)
- 유니티에서의 벡터
  - new Vector3(x,y,z): 3차원 공간에서의 좌표
  - new Vector2(x,y): 2차원 공간에서의 좌표

#### 절대 위치와 상대 위치

- 벡터: 방향과 크기를 가짐 (화살표의 방향과 길이)
  - ex. (1,1)이라는 Vector2의 의미
    - 상대 좌표: 현재 좌표에서 (1,1)만큼 더 가려고 함
    - 절대 좌표: 게임 세상 속에서 나의 좌표가 (1,1)
- 벡터값으로 나타낼 수 있는 2가지 상태
  - 절대적인 좌표: 화살표의 시작점이 원점 (0,0)
  - 상대적인 방향과 크기(길이)

#### 벡터의 크기

- 모든 원소를 제곱하여 더한 값의 제곱근 (피타고라스의 정리)
- 벡터의 크기는 화살표의 길이에 대응 -> 음수가 될 수 없음
- 벡터의 방향과 크기는 별개의 값 -> 방향은 같지만 크기가 다른 벡터 존재
  - ex. (-1.5,2), (-3,4), (-6,8)의 방향은 모두 같음. 크기는 각각 2.5, 5, 10으로 다름

#### 벡터의 스칼라 곱

- 스칼라 곱: 벡터에 배수를 취하는 숫자를 곱함 (스칼라(Scalar): 곱하는 수)
- 개별 x,y 원소의 값에 배수가 취해짐. 벡터의 크기도 곱한 만큼 늘어남
  - ex. (-3,4) * 2 = (-6,8)
- 스칼라 값: 기존 벡터를 잡아 늘리거나 줄이는 배율
- 벡터의 크기는 변경 가능. 방향은 변경 불가

#### 방향 벡터

- 'A의 방향으로 B만큼의 속력'을 '벡터 A x 스칼라 B'로 표현했을 때, 실제 속력이 B보다 크거나 작음
  - ex. (3,-3) = (1,-1) * 3
    - (3,-3)의 속력이 (1,-1)의 3배
    - (1,-1)의 속력은 1.414...
    - (3,-3)의 속력은 4.242...
- 방향벡터: 정규화된 벡터(Normalized Vector). 크기가 1인 벡터
  - 방향은 같지만 크기가 서로 다른 벡터를 비교하는 기준으로 삼을 수 있음
  - 벡터 정규화: 벡터의 시작점에서 반지름이 1인 원을 그려, 원의 바깥 부분을 잘라냄. 방향은 유지하며 벡터의 크기를 1로 만듦
  - ex. (3,-3)의 방향 벡터: (0.71, -0.71)
    - (3,-3) = (0.71,-0.71) * 4.24
    - (3,-3)의 속력: 4.24
- 벡터의 방향과 크기: 방향벡터 x 스칼라 곱

#### 벡터의 덧셈, 뺄셈

- 덧셈: 두 벡터 A와 B를 더함 -> A만큼 이동한 상태에서 B만큼 더 이동
  - A + B = (3,2) + (1,6) = (3+1,2+6) = (4,8)
- 뺄셈: 두 수 사이의 간격을 구하는 것. 어떤 수에서 다른 수에 도달하기 위한 거리와 방향
  - B - A = A에서 B까지의 간격 = A에서 B까지의 방향과 거리
  - B - A = (-2,8) - (1,3) = (-2-1,8-3) = (-3,5)
  - (목적지) - (현재 위치) = 현재 위치에서 목적지까지의 방향과 거리
  - ex. 몬스터가 A(1,3), 플레이어가 B(-2,8)
    - 몬스터가 플레이어를 잡기 위해 이동해야 할 방향과 거리: B - A = (-3,5)
    - 몬스터가 이동할 방향: (-3,5)의 방향벡터인 (-0.5,0.9)
    - 몬스터가 이동할 거리: (-3,5)의 크기인 5.83...
 
#### 벡터의 내적

- 내적: 어떤 벡터를 다른 벡터로 투영하는 연산. 점 연산(dot product)
- A·B = |A||B|cosθ
- A·B는 벡터 B를 벡터 A의 지평선으로 끌어내리는 연산
- 내적의 결과: 상대 벡터가 투영되었을 때 가지는 길이
- 내적을 사용하는 이유: 자신과 상대방 사이의 각도가 벌어질수록 투영된 길이가 짧아짐 -> 둘 사이의 각도를 알 수 있음

|둘 사이의 각도|내적 결과|
|-----|---|
|0°|+1|
|0°~90°|+1~0|
|90°|0|
|90°~180°|0~-1|
|180°|-1|

- 각도가 90° 미만: A·B > 0
- 각도가 90° 초과: A·B < 0
- 각도가 90°: A·B = 0

#### 벡터의 외적

- 외적(outer product): 두 벡터를 모두 수직으로 통과하는 벡터를 구하는 연산. 벡터 곱(vector product), 교차 곱(cross product)
- AxB = C / BxA = -C
- 두 벡터 사이의 외적 결과: 두 벡터에 모두 수직인 벡터
- 연산 순서를 뒤집으면 결과 벡터의 방향이 반대가 됨
- 어떤 표면에 수직인 방향을 구할 수 있음
  - 벡터 C가 벡터 A와 벡터 B에 수직 -> 평면 L에 수직
  - 벡터 C: 평면 L이 바라보고 있는 방향. 크기 1로 정규화하여 평면 L의 방향으로 사용
- 노말벡터(Normal Vector): 법선벡터. 어떤 평면과 수직, 해당 평면의 방향을 나타내는 벡터

#### 유니티 C# 벡터

- Vector 타입: 구조체(struct)로 선언되어 있음. 변수가 값 자체로 동작
  - new Vector2(x,y);
  - new Vector3(x,y,z);
  - new Vector4(x,y,z,w);

  ```
public struct Vector3 {
  public float x;
  public float y;
  public float x;
}

Vector3 a = new Vector3(0,0,0);
Vector3 b = a;
b.x = 100;

// a: (0,0,0)
// b: (100,0,0)
  ```

- Vector3 연산
  - 스칼라 곱: Vector3 * 스칼라;

  ```
  Vector3 a = new Vector3(3,6,9);
  a = a * 10;
  ```

  - 벡터의 덧셈: Vector3 + Vector3;
 
  ```
Vector3 a = new Vector3(2,4,8);
Vector3 b = new Vector3(3,6,9);
Vector3 c = a + b;
  ```

  - 벡터의 뺄셈: Vector3 - Vector3;

  ```
Vector3 a = new Vector3(2,4,8);
Vector3 b = new Vector3(3,6,9);
Vector3 c = a - b;
  ```

  - 벡터 정규화: Vector3.normalized;

```
Vector3 a = new Vector3(3,3,3);
Vector3 b = a.normalized;
```

  - 벡터의 크기: Vector3.magnitude;

```
Vector3 a = new Vector3(3,3,3);
float b = a.magnitude;
```
 
  - 벡터의 내적: Vector3.Dot(a,b);

```
Vector3 a = new Vector3(0,1,0);  // 위쪽으로 향하는 벡터
Vector3 b = new Vector3(1,0,0);  // 오른쪽으로 향하는 벡터
float c = Vector3.Dot(a,b);  // 수직인 벡터끼리 내적하면 결과는 0
```

  - 벡터의 외적: Vector3.Cross(a,b);

```
Vector3 a = new Vector3(0,0,1);  // 앞쪽(Z) 방향벡터
Vector3 b = new Vector3(1,0,0);  // 오른쪽(X) 방향벡터
// 외적 결과 c는 앞쪽과 오른쪽 모두에 수직인 위쪽(Y) 방향벡터
Vector3 c = Vector3.Cross(a,b);  // c는 (0,1,0)
```

- Vector 응용
  - 
